/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function r(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}function e(...r){const e=(r,e)=>o=>r(e(o));return{encode:Array.from(r).reverse().reduce((r,o)=>r?e(r,o.encode):o.encode,void 0),decode:r.reduce((r,o)=>r?e(r,o.decode):o.decode,void 0)}}function o(e){return{encode:o=>{if(!Array.isArray(o)||o.length&&"number"!=typeof o[0])throw new Error("alphabet.encode input should be an array of numbers");return o.map(o=>{if(r(o),o<0||o>=e.length)throw new Error(`Digit index outside alphabet: ${o} (alphabet: ${e.length})`);return e[o]})},decode:r=>{if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("alphabet.decode input should be array of strings");return r.map(r=>{if("string"!=typeof r)throw new Error(`alphabet.decode: not string element=${r}`);const o=e.indexOf(r);if(-1===o)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return o})}}}function n(r=""){if("string"!=typeof r)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("join.encode input should be array of strings");for(let r of e)if("string"!=typeof r)throw new Error(`join.encode: non-string input=${r}`);return e.join(r)},decode:e=>{if("string"!=typeof e)throw new Error("join.decode input should be string");return e.split(r)}}}function t(e,o="="){if(r(e),"string"!=typeof o)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(o);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===o;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function i(r){if("function"!=typeof r)throw new Error("normalize fn should be function");return{encode:r=>r,decode:e=>r(e)}}function d(e,o,n){if(o<2)throw new Error(`convertRadix: wrong from=${o}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let t=0;const i=[],d=Array.from(e);for(d.forEach(e=>{if(r(e),e<0||e>=o)throw new Error(`Wrong integer: ${e}`)});;){let r=0,e=!0;for(let i=t;i<d.length;i++){const f=d[i],s=o*r+f;if(!Number.isSafeInteger(s)||o*r/o!==r||s-f!==o*r)throw new Error("convertRadix: carry overflow");if(r=s%n,d[i]=Math.floor(s/n),!Number.isSafeInteger(d[i])||d[i]*n+r!==s)throw new Error("convertRadix: carry overflow");e&&(d[i]?e=!1:t=i)}if(i.push(r),e)break}for(let r=0;r<e.length-1&&0===e[r];r++)i.push(0);return i.reverse()}const f=(r,e)=>e?f(e,r%e):r,s=(r,e)=>r+(e-f(r,e));function c(e,o,n,t){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(o<=0||o>32)throw new Error(`convertRadix2: wrong from=${o}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(s(o,n)>32)throw new Error(`convertRadix2: carry overflow from=${o} to=${n} carryBits=${s(o,n)}`);let i=0,d=0;const f=2**n-1,c=[];for(const s of e){if(r(s),s>=2**o)throw new Error(`convertRadix2: invalid data word=${s} from=${o}`);if(i=i<<o|s,d+o>32)throw new Error(`convertRadix2: carry overflow pos=${d} from=${o}`);for(d+=o;d>=n;d-=n)c.push((i>>d-n&f)>>>0);i&=2**d-1}if(i=i<<n-d&f,!t&&d>=o)throw new Error("Excess padding");if(!t&&i)throw new Error(`Non-zero padding: ${i}`);return t&&d>0&&c.push(i>>>0),c}function a(e,o=!1){if(r(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(s(8,e)>32||s(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return c(Array.from(r),8,e,!o)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(c(r,e,8,o))}}}function h(r){if("function"!=typeof r)throw new Error("unsafeWrapper fn should be function");return function(...e){try{return r.apply(null,e)}catch(o){}}}const w=e(a(4),o("0123456789ABCDEF"),n("")),u=e(a(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),t(5),n(""));e(a(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),t(5),n("")),e(a(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),n(""),i(r=>r.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const l=e(a(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),t(6),n("")),g=e(a(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),t(6),n("")),p=t=>{return e((r(i=58),{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return d(Array.from(r),256,i)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(d(r,i,256))}}),o(t),n(""));var i},y=p("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");p("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),p("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const b=[0,2,3,5,6,7,9,10,11],E={encode(r){let e="";for(let o=0;o<r.length;o+=8){const n=r.subarray(o,o+8);e+=y.encode(n).padStart(b[n.length],"1")}return e},decode(r){let e=[];for(let o=0;o<r.length;o+=11){const n=r.slice(o,o+11),t=b.indexOf(n.length),i=y.decode(n);for(let r=0;r<i.length-t;r++)if(0!==i[r])throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(i.slice(i.length-t)))}return Uint8Array.from(e)}},A=o=>e(function(e,o){if(r(e),"function"!=typeof o)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=o(r).slice(0,e),t=new Uint8Array(r.length+e);return t.set(r),t.set(n,r.length),t},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-e),t=o(n).slice(0,e),i=r.slice(-e);for(let o=0;o<e;o++)if(t[o]!==i[o])throw new Error("Invalid checksum");return n}}}(4,r=>o(o(r))),y),m=e(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),n("")),x=[996825010,642813549,513874426,1027748829,705979059];function $(r){const e=r>>25;let o=(33554431&r)<<5;for(let n=0;n<x.length;n++)1==(e>>n&1)&&(o^=x[n]);return o}function v(r,e,o=1){const n=r.length;let t=1;for(let i=0;i<n;i++){const e=r.charCodeAt(i);if(e<33||e>126)throw new Error(`Invalid prefix (${r})`);t=$(t)^e>>5}t=$(t);for(let i=0;i<n;i++)t=$(t)^31&r.charCodeAt(i);for(let i of e)t=$(t)^i;for(let i=0;i<6;i++)t=$(t);return t^=o,m.encode(c([t%2**30],30,5,!1))}function U(r){const e="bech32"===r?1:734539939,o=a(5),n=o.decode,t=o.encode,i=h(n);function d(r,o=90){if("string"!=typeof r)throw new Error("bech32.decode input should be string, not "+typeof r);if(r.length<8||!1!==o&&r.length>o)throw new TypeError(`Wrong string length: ${r.length} (${r}). Expected (8..${o})`);const n=r.toLowerCase();if(r!==n&&r!==r.toUpperCase())throw new Error("String must be lowercase or uppercase");const t=(r=n).lastIndexOf("1");if(0===t||-1===t)throw new Error('Letter "1" must be present between prefix and data only');const i=r.slice(0,t),d=r.slice(t+1);if(d.length<6)throw new Error("Data must be at least 6 characters long");const f=m.decode(d).slice(0,-6),s=v(i,f,e);if(!d.endsWith(s))throw new Error(`Invalid checksum in ${r}: expected "${s}"`);return{prefix:i,words:f}}return{encode:function(r,o,n=90){if("string"!=typeof r)throw new Error("bech32.encode prefix should be string, not "+typeof r);if(!Array.isArray(o)||o.length&&"number"!=typeof o[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof o);const t=r.length+7+o.length;if(!1!==n&&t>n)throw new TypeError(`Length ${t} exceeds limit ${n}`);return`${r=r.toLowerCase()}1${m.encode(o)}${v(r,o,e)}`},decode:d,decodeToBytes:function(r){const{prefix:e,words:o}=d(r,!1);return{prefix:e,words:o,bytes:n(o)}},decodeUnsafe:h(d),fromWords:n,fromWordsUnsafe:i,toWords:t}}U("bech32"),U("bech32m");const R={utf8:{encode:r=>(new TextDecoder).decode(r),decode:r=>(new TextEncoder).encode(r)},hex:e(a(4),o("0123456789abcdef"),n(""),i(r=>{if("string"!=typeof r||r.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof r} with length ${r.length}`);return r.toLowerCase()})),base16:w,base32:u,base64:l,base64url:g,base58:y,base58xmr:E};Object.keys(R).join(", ");export{A as b};
